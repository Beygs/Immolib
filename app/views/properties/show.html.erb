<div class="property-wrapper pl4 pr4 pt1">
  <div class="property-wrapper__left pr4">
    <h1 class="primary pb4"> Mon annonce </h1>

    <%if @property.property_picture.attached?%>
      <div class="property-picture">
        <%= image_tag @property.property_picture, alt: 'property picture' %>
        <%= link_to "Supprimer la photo", property_property_picture_path(@property), method: "delete", class: "delete-property-picture"  %>
      </div>
    <%else%>
      <div class="property-picture no-picture">
        <p>Ajouter une photo à mon annonce</p>
      </div>
      <div class="picture-profile-modal hidden">
          <%= render "property-picture-form" %>
        </div>
    <%end%>
    <div class="property-wrapper__left__infos">
      <h2> <%= @property.title %> </h2>
      <p> <%= @property.city %> </p>
      <p> Liens : <%= @property.other_link %> </p>
      <p> Instructions : <%= @property.instructions %> </p>
      <p><%= link_to "Éditer mon annonce", edit_property_path(@property), class: "btn white-btn bg-primary" %></p>
    </div>
  </div>
  <div class="property-wrapper__right pl4">
    <%= week_calendar(events:@property.slots, attribute: :start_date) do |date, slots| %>
      <div class="property-wrapper__right__date">
        <%= date.strftime("%d") %> <%= @date_arr[date.strftime("%m").to_i]%>
      </div>
      <% slots.each do |slot| %>
        <div class="property-wrapper__right__slot">
          <p> Début : <%= slot.start_date.strftime("%H:%M") %> </p>
          <p> <%= slot.duration %> minutes </p>
          <p> <%= slot.max_appointments %> <%= slot.max_appointments>1 ? "places" : "place" %> </p>
        </div>
      <% end %>
    <% end %>
  </div>

</div>

<%if !@property.property_picture.attached?%>
  <%= javascript_include_tag 'property-pic.js' %>
<% end %>