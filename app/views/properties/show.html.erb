<div class="property-wrapper pl4 pr4 pt1">
  <div class="property-wrapper__left pr4">
    <%= link_to raw("<i class='fas fa-chevron-left'></i> Retour"), user_path(current_user), class: "return-link" %>
    <h1 class="primary pb4"> Mon logement Immolib </h1>

    <%if @property.property_picture.attached?%>
      <div class="pic property-picture">
        <%= image_tag @property.property_picture, alt: 'property picture' %>
        <p class="property-picture--change"> Modifier </p>
      </div>
      <%= link_to "Supprimer la photo", property_property_picture_path(@property), method: "delete", class: "delete-property-picture"  %>
    <%else%>
      <div class="pic property-picture no-picture">
        <p>Ajouter une photo à mon logement</p>
      </div>
    <%end%>
    <%= render(
      partial: 'layouts/picture_modal',
      locals: {
        url: property_property_pictures_path(@property),
        type: :property_picture
      }
    ) %>
    <div class="property-wrapper__left__infos">
      <h2> <%= @property.title %> </h2>
      <h3 class="mb1"> <%= @property.city %> </h3>
      <p class="mb1">Lien vers mon annonce en ligne : <%= @property.other_link %> </p>
      <p class="mb1">Mes instructions de visite : <%= @property.instructions %> </p>
      <p class="mb1">Mon URL Immolib (à partager sur vos annonces en ligne) : <%= @property.go_visit_url %></p>
      <p class="mb1">Visualiser le parcours candidat : <%=link_to "mon parcours candidat Immolib", go_visit_property_path(@property.id)%></p>
      <!-- A supprimer en production -->
      <p>URL Immolib (dev) : <%= @property.go_visit_url_dev %></p>
      <p>URL Immolib (local) : <%= @property.go_visit_url_local %></p>
      <!-- end -->

      <p><%= link_to "Éditer mon annonce", edit_property_path(@property), class: "btn white-btn bg-primary" %></p>
      <p><%= link_to "Supprimer mon annonce", property_path(@property), method: "delete", data: {confirm: "Êtes-vous sûr ? Cette action est irréversible."}, class: "btn white-btn bg-warning" %></p>
    </div>
  </div>
  <div class="property-wrapper__right pl4">
    <%= week_calendar(events:@property.slots, attribute: :start_date) do |date, slots| %>
      <div class="property-wrapper__right__date">
        <%= date.strftime("%d") %> <%= @date_arr[date.strftime("%m").to_i]%>
      </div>
      <% slots.each do |slot| %>
        <%= link_to render(partial: "slot-card", locals: { slot: slot }), property_slot_path(@property, slot) %>
      <% end %>
    <% end %>
    <div>
      <p> Cliquez sur un créneau pour en afficher le détail. </p>
      <%= link_to 'Ajoutez un créneau de visite', new_property_slot_path(@property) %>
    </div>
  </div>
</div>
