<div class="slot-candidate-wrapper">
  <div class="slot-candidate-wrapper__title">
    <h1>Etape 1/3 : sélection d'un créneau disponible</h1>
    <h2>Sélectionnez un créneau de visite parmi les propositions disponibles.</h2>
    <p>Les créneaux disponibles sont mis à jour automatiquement. 
      Si aucun d’eux ne vous convient, des créneaux peuvent se libérer en cas de modification ou annulation de candidats.
    </p>
  </div>
  <ul>
    <% @slots.each do |slot| %>
    
      <% if slot.available? %>
        <li>
          Le <%=slot.start_date.day%> <%=slot.start_date.strftime('%B')%> à <%=slot.start_date.hour%> h :
          <%= link_to "Reserver", appointments_path(param1: slot.id), method: :post %>
          Nombre de places disponible : <%=slot.availability%>
        </li>
      <% end %>
    <% end %>
  </ul>
  <p> Réservable ? <%= !@property.already_has_appointment?(current_user) %> </p>
  <div class="slot-candidate-wrapper__calendar">
    <%= week_calendar(events:@slots, attribute: :start_date) do |date, slots| %>
      <div class="property-wrapper__right__date">
        <%= date.strftime("%d") %> <%= @date_arr[date.strftime("%m").to_i]%>
      </div>
      <% slots.each do |slot| %>
        <%= link_to render(partial: "properties/slot-card", locals: { slot: slot }), '#' %>
      <% end %>
    <% end %>
  </div>
</div>